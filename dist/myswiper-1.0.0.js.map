{"version":3,"file":"myswiper-1.0.0.js","sources":["../src/myswiper/myswiper.js","../src/main.js"],"sourcesContent":["/*\r\n * Copyright (c) 2021.\r\n * leiming.\r\n * 自定义简单的Swiper组件\r\n */\r\nfunction Swiper(id,options = {\r\n        pageSize:3,\r\n        enablePlay:true,\r\n        pagePlayTime:5\r\n    }) {\r\n\r\n    //private filed\r\n    this.pageSize = 3;\r\n    if(options.pageSize){\r\n        this.pageSize = options.pageSize;\r\n    }\r\n    //当前播放第几页,默认第一页开始\r\n    this.page = 1;\r\n    //定时轮播\r\n    this.timer = 0;\r\n    //是否开启自动播放\r\n    this.enablePlay = true;\r\n    if(typeof options.enablePlay !== 'undefined' ){\r\n        this.enablePlay = options.enablePlay;\r\n    }\r\n    //多久自动轮播一次\r\n    this.pagePlayTime = 5*1000;\r\n    if(options.pagePlayTime){\r\n        this.pagePlayTime = options.pagePlayTime*1000;\r\n    }\r\n    this.sp = document.getElementById(id);\r\n    if(!this.sp){\r\n        throw new Error(\"swiper id is not exist\");\r\n    }\r\n    this.initDom();\r\n    //数据页元素\r\n    this.ul = this.sp.getElementsByClassName(\"ul\")[0];\r\n    //指标总元素\r\n    this.bp = this.sp.getElementsByClassName(\"b-p\")[0];\r\n    //初始化进入出去事件\r\n    this.moveIn = \"mouseover\";\r\n    this.moveOut = \"mouseout\";\r\n    if('ontouchstart' in window){\r\n        this.moveIn = \"touchstart\";\r\n        this.moveOut = \"touchend\";\r\n    }\r\n    this.initEvent();\r\n    if(this.enablePlay){\r\n        this.initTimer();\r\n    }\r\n};\r\n\r\n/**\r\n * 选择性初始化dom\r\n */\r\nSwiper.prototype.initDom = function(){\r\n    if(this.sp.getElementsByClassName(\"ul\").length == 0){\r\n        let ul =  document.createElement('ul');\r\n        ul.classList.add(\"ul\");\r\n        this.sp.appendChild(ul);\r\n    }\r\n    if(this.sp.getElementsByClassName(\"ol\").length == 0){\r\n        let ol = document.createElement('b-p');\r\n        ol.classList.add(\"b-p\");\r\n        this.sp.appendChild(ol);\r\n    }\r\n\r\n}\r\n/**\r\n * 初始化事件\r\n */\r\nSwiper.prototype.initEvent = function(){\r\n    /*视件代理类型写法\r\n    while(currentNode  !== event.currentTarget){\r\n        if(currentNode.matches(\".b-p .point\")){\r\n            //var index = currentNode.textContent;\r\n            [].slice.call(currentNode.parentNode.children).forEach(item=>{\r\n                item.classList.remove(\"at\");\r\n            });\r\n            var index = [].indexOf.call(currentNode.parentNode.children,currentNode);\r\n            var p = -100 * index;\r\n            ul.style.transform  = \"translateX(\"+p+\"%)\";\r\n            currentNode.classList.add(\"at\");\r\n            break;\r\n        }\r\n        currentNode = currentNode.parentNode;\r\n    }*/\r\n    this.initPointEvent();\r\n    //初始化进入及出去事件\r\n    this.initMoveEvent();\r\n\r\n};\r\n/**\r\n * 初始化园圈指标事件\r\n */\r\nSwiper.prototype.initPointEvent = function(){\r\n    this.sp.addEventListener('click',(event)=>{\r\n        var currentNode  = event.target;\r\n        var rc = event.currentTarget;\r\n        var ul = rc.getElementsByClassName(\"ul\")[0];\r\n        //事件代理写法\r\n        if(!currentNode.matches(\".b-p .point\")){\r\n            return ;\r\n        }\r\n        if(this.enablePlay){\r\n            this.clearTimer();\r\n        }\r\n        var index = [].indexOf.call(currentNode.parentNode.children,currentNode);\r\n        this.page = index+1;\r\n        this.goPage();\r\n        if(this.enablePlay){\r\n            this.initTimer();\r\n        }\r\n\r\n    },false);\r\n};\r\n/**\r\n * 当启用自动轮播时，元素进入及出去都暂停轮播\r\n */\r\nSwiper.prototype.initMoveEvent = function(){\r\n        if(!this.enablePlay){\r\n            return ;\r\n        }\r\n        this.ul.addEventListener(this.moveIn,this.onMoveIn.bind(this),false);\r\n        this.ul.addEventListener(this.moveOut,this.onMoveOut.bind(this),false);\r\n}\r\n\r\n/**\r\n * 进入事件\r\n * @param event\r\n */\r\nSwiper.prototype.onMoveIn = function(event){\r\n    this.clearTimer();\r\n}\r\n\r\n/**\r\n * 移出事件\r\n * @param event\r\n */\r\nSwiper.prototype.onMoveOut = function(event){\r\n    event.preventDefault();\r\n    this.initTimer();\r\n}\r\n\r\n/**\r\n * 启动自动轮播\r\n */\r\nSwiper.prototype.initTimer = function(){\r\n    this.timer = window.setInterval(()=>{\r\n        this.next();\r\n    },this.pagePlayTime)\r\n};\r\n/**\r\n * 清除自动跳转\r\n */\r\nSwiper.prototype.clearTimer = function(){\r\n    window.clearInterval(this.timer);\r\n};\r\n/**\r\n * 跳转到指定页\r\n * @param page\r\n */\r\nSwiper.prototype.goPage = function(page){\r\n    if(page){\r\n        this.page = page;\r\n    }\r\n    let currentNode = this.bp.children[this.page-1];\r\n    [].slice.call(this.bp.children).forEach(item=>{\r\n        item.classList.remove(\"at\");\r\n    });\r\n    var index = [].indexOf.call(currentNode.parentNode.children,currentNode);\r\n    var p = -100 * index;\r\n    this.ul.style.transform  = \"translateX(\"+p+\"%)\";\r\n    currentNode.classList.add(\"at\");\r\n};\r\n\r\n/**\r\n * 跳转到下一页\r\n */\r\nSwiper.prototype.next = function(){\r\n    var len = this.bp.children.length;\r\n    if(this.page >= len){\r\n        this.page = 1;\r\n    }else{\r\n        this.page++;\r\n    }\r\n    this.goPage();\r\n};\r\n\r\n/**\r\n * 动态添加一个元素\r\n * @param id\r\n * @param html  元素html内容\r\n * @param callback  添加后回调\r\n */\r\nSwiper.prototype.add = function(id,html,callback){\r\n    //判断是否要添加指示\r\n    let len = this.ul.children.length;\r\n    let addPoint = false;\r\n    //判断是否要添加指示园圈，如果现在刚好不用添加，那添加一个元素之后肯定是要添加的\r\n    if(len % this.pageSize === 0){\r\n        addPoint = true;\r\n    }\r\n    //内容\r\n    let li = document.createElement('li');\r\n    let box = document.createElement('div');\r\n    box.classList.add(\"c-box\");\r\n    if(id){\r\n        box.setAttribute(\"id\",id);\r\n    }\r\n    if(html){\r\n        box.innerHTML = html;\r\n    }\r\n    li.appendChild(box);\r\n\r\n    this.ul.appendChild(li);\r\n    //需要添加指标园圈\r\n    if(addPoint){\r\n        //内容\r\n        let pointLi =document.createElement('li');\r\n        pointLi.textContent = this.bp.children.length + 1;\r\n        pointLi.classList.add(\"point\")\r\n        //如果是第一个添加\r\n        if(this.bp.children.length == 0){\r\n            pointLi.classList.add(\"at\")\r\n        }\r\n        this.bp.appendChild(pointLi);\r\n\r\n    }\r\n    if(typeof callback === 'function'){\r\n        callback.call(this);\r\n    }\r\n};\r\n\r\nSwiper.prototype.destroy = function(){\r\n    this.sp = null;\r\n    this.ul = null;\r\n    this.bp = null;\r\n    this.clearTimer();\r\n    if(this.enablePlay){\r\n        this.ul.removeEventListener(this.moveIn,this.onMoveIn);\r\n        this.ul.addEventListener(this.moveOut,this.onMoveOut);\r\n    }\r\n};\r\n\r\nexport default  Swiper;","/*\r\n * Copyright (c) 2021.\r\n * leiming.\r\n *\r\n */\r\nimport Swiper from \"./myswiper/myswiper\";\r\n\r\nexport default Swiper;\r\n"],"names":["Swiper","id","options","pageSize","enablePlay","pagePlayTime","page","timer","sp","document","getElementById","Error","initDom","ul","getElementsByClassName","bp","moveIn","moveOut","window","initEvent","initTimer","prototype","length","createElement","classList","add","appendChild","ol","initPointEvent","initMoveEvent","addEventListener","event","currentNode","target","rc","currentTarget","matches","clearTimer","index","indexOf","call","parentNode","children","goPage","onMoveIn","bind","onMoveOut","preventDefault","setInterval","next","clearInterval","slice","forEach","item","remove","p","style","transform","len","html","callback","addPoint","li","box","setAttribute","innerHTML","pointLi","textContent","destroy","removeEventListener"],"mappings":";;;;;;;;;;;IAAA;IACA;IACA;IACA;IACA;IACA,SAASA,MAAT,CAAgBC,EAAhB,EAIO;IAAA,MAJYC,OAIZ,uEAJsB;IACrBC,IAAAA,QAAQ,EAAC,CADY;IAErBC,IAAAA,UAAU,EAAC,IAFU;IAGrBC,IAAAA,YAAY,EAAC;IAHQ,GAItB;IAEH;IACA,OAAKF,QAAL,GAAgB,CAAhB;;IACA,MAAGD,OAAO,CAACC,QAAX,EAAoB;IAChB,SAAKA,QAAL,GAAgBD,OAAO,CAACC,QAAxB;IACH,GANE;;;IAQH,OAAKG,IAAL,GAAY,CAAZ,CARG;;IAUH,OAAKC,KAAL,GAAa,CAAb,CAVG;;IAYH,OAAKH,UAAL,GAAkB,IAAlB;;IACA,MAAG,OAAOF,OAAO,CAACE,UAAf,KAA8B,WAAjC,EAA8C;IAC1C,SAAKA,UAAL,GAAkBF,OAAO,CAACE,UAA1B;IACH,GAfE;;;IAiBH,OAAKC,YAAL,GAAoB,IAAE,IAAtB;;IACA,MAAGH,OAAO,CAACG,YAAX,EAAwB;IACpB,SAAKA,YAAL,GAAoBH,OAAO,CAACG,YAAR,GAAqB,IAAzC;IACH;;IACD,OAAKG,EAAL,GAAUC,QAAQ,CAACC,cAAT,CAAwBT,EAAxB,CAAV;;IACA,MAAG,CAAC,KAAKO,EAAT,EAAY;IACR,UAAM,IAAIG,KAAJ,CAAU,wBAAV,CAAN;IACH;;IACD,OAAKC,OAAL,GAzBG;;IA2BH,OAAKC,EAAL,GAAU,KAAKL,EAAL,CAAQM,sBAAR,CAA+B,IAA/B,EAAqC,CAArC,CAAV,CA3BG;;IA6BH,OAAKC,EAAL,GAAU,KAAKP,EAAL,CAAQM,sBAAR,CAA+B,KAA/B,EAAsC,CAAtC,CAAV,CA7BG;;IA+BH,OAAKE,MAAL,GAAc,WAAd;IACA,OAAKC,OAAL,GAAe,UAAf;;IACA,MAAG,kBAAkBC,MAArB,EAA4B;IACxB,SAAKF,MAAL,GAAc,YAAd;IACA,SAAKC,OAAL,GAAe,UAAf;IACH;;IACD,OAAKE,SAAL;;IACA,MAAG,KAAKf,UAAR,EAAmB;IACf,SAAKgB,SAAL;IACH;IACJ;IAED;IACA;IACA;;IACApB,MAAM,CAACqB,SAAP,CAAiBT,OAAjB,GAA2B,YAAU;IACjC,MAAG,KAAKJ,EAAL,CAAQM,sBAAR,CAA+B,IAA/B,EAAqCQ,MAArC,IAA+C,CAAlD,EAAoD;IAChD,QAAIT,EAAE,GAAIJ,QAAQ,CAACc,aAAT,CAAuB,IAAvB,CAAV;IACAV,IAAAA,EAAE,CAACW,SAAH,CAAaC,GAAb,CAAiB,IAAjB;IACA,SAAKjB,EAAL,CAAQkB,WAAR,CAAoBb,EAApB;IACH;;IACD,MAAG,KAAKL,EAAL,CAAQM,sBAAR,CAA+B,IAA/B,EAAqCQ,MAArC,IAA+C,CAAlD,EAAoD;IAChD,QAAIK,EAAE,GAAGlB,QAAQ,CAACc,aAAT,CAAuB,KAAvB,CAAT;IACAI,IAAAA,EAAE,CAACH,SAAH,CAAaC,GAAb,CAAiB,KAAjB;IACA,SAAKjB,EAAL,CAAQkB,WAAR,CAAoBC,EAApB;IACH;IAEJ,CAZD;IAaA;IACA;IACA;;;IACA3B,MAAM,CAACqB,SAAP,CAAiBF,SAAjB,GAA6B,YAAU;IACnC;IACJ;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACI,OAAKS,cAAL,GAhBmC;;IAkBnC,OAAKC,aAAL;IAEH,CApBD;IAqBA;IACA;IACA;;;IACA7B,MAAM,CAACqB,SAAP,CAAiBO,cAAjB,GAAkC,YAAU;IAAA;;IACxC,OAAKpB,EAAL,CAAQsB,gBAAR,CAAyB,OAAzB,EAAiC,UAACC,KAAD,EAAS;IACtC,QAAIC,WAAW,GAAID,KAAK,CAACE,MAAzB;IACA,QAAIC,EAAE,GAAGH,KAAK,CAACI,aAAf;IACA,IAASD,EAAE,CAACpB,sBAAH,CAA0B,IAA1B,EAAgC,CAAhC,EAH6B;;IAKtC,QAAG,CAACkB,WAAW,CAACI,OAAZ,CAAoB,aAApB,CAAJ,EAAuC;IACnC;IACH;;IACD,QAAG,KAAI,CAAChC,UAAR,EAAmB;IACf,MAAA,KAAI,CAACiC,UAAL;IACH;;IACD,QAAIC,KAAK,GAAG,GAAGC,OAAH,CAAWC,IAAX,CAAgBR,WAAW,CAACS,UAAZ,CAAuBC,QAAvC,EAAgDV,WAAhD,CAAZ;IACA,IAAA,KAAI,CAAC1B,IAAL,GAAYgC,KAAK,GAAC,CAAlB;;IACA,IAAA,KAAI,CAACK,MAAL;;IACA,QAAG,KAAI,CAACvC,UAAR,EAAmB;IACf,MAAA,KAAI,CAACgB,SAAL;IACH;IAEJ,GAlBD,EAkBE,KAlBF;IAmBH,CApBD;IAqBA;IACA;IACA;;;IACApB,MAAM,CAACqB,SAAP,CAAiBQ,aAAjB,GAAiC,YAAU;IACnC,MAAG,CAAC,KAAKzB,UAAT,EAAoB;IAChB;IACH;;IACD,OAAKS,EAAL,CAAQiB,gBAAR,CAAyB,KAAKd,MAA9B,EAAqC,KAAK4B,QAAL,CAAcC,IAAd,CAAmB,IAAnB,CAArC,EAA8D,KAA9D;IACA,OAAKhC,EAAL,CAAQiB,gBAAR,CAAyB,KAAKb,OAA9B,EAAsC,KAAK6B,SAAL,CAAeD,IAAf,CAAoB,IAApB,CAAtC,EAAgE,KAAhE;IACP,CAND;IAQA;IACA;IACA;IACA;;;IACA7C,MAAM,CAACqB,SAAP,CAAiBuB,QAAjB,GAA4B,UAASb,KAAT,EAAe;IACvC,OAAKM,UAAL;IACH,CAFD;IAIA;IACA;IACA;IACA;;;IACArC,MAAM,CAACqB,SAAP,CAAiByB,SAAjB,GAA6B,UAASf,KAAT,EAAe;IACxCA,EAAAA,KAAK,CAACgB,cAAN;IACA,OAAK3B,SAAL;IACH,CAHD;IAKA;IACA;IACA;;;IACApB,MAAM,CAACqB,SAAP,CAAiBD,SAAjB,GAA6B,YAAU;IAAA;;IACnC,OAAKb,KAAL,GAAaW,MAAM,CAAC8B,WAAP,CAAmB,YAAI;IAChC,IAAA,MAAI,CAACC,IAAL;IACH,GAFY,EAEX,KAAK5C,YAFM,CAAb;IAGH,CAJD;IAKA;IACA;IACA;;;IACAL,MAAM,CAACqB,SAAP,CAAiBgB,UAAjB,GAA8B,YAAU;IACpCnB,EAAAA,MAAM,CAACgC,aAAP,CAAqB,KAAK3C,KAA1B;IACH,CAFD;IAGA;IACA;IACA;IACA;;;IACAP,MAAM,CAACqB,SAAP,CAAiBsB,MAAjB,GAA0B,UAASrC,IAAT,EAAc;IACpC,MAAGA,IAAH,EAAQ;IACJ,SAAKA,IAAL,GAAYA,IAAZ;IACH;;IACD,MAAI0B,WAAW,GAAG,KAAKjB,EAAL,CAAQ2B,QAAR,CAAiB,KAAKpC,IAAL,GAAU,CAA3B,CAAlB;IACA,KAAG6C,KAAH,CAASX,IAAT,CAAc,KAAKzB,EAAL,CAAQ2B,QAAtB,EAAgCU,OAAhC,CAAwC,UAAAC,IAAI,EAAE;IAC1CA,IAAAA,IAAI,CAAC7B,SAAL,CAAe8B,MAAf,CAAsB,IAAtB;IACH,GAFD;IAGA,MAAIhB,KAAK,GAAG,GAAGC,OAAH,CAAWC,IAAX,CAAgBR,WAAW,CAACS,UAAZ,CAAuBC,QAAvC,EAAgDV,WAAhD,CAAZ;IACA,MAAIuB,CAAC,GAAG,CAAC,GAAD,GAAOjB,KAAf;IACA,OAAKzB,EAAL,CAAQ2C,KAAR,CAAcC,SAAd,GAA2B,gBAAcF,CAAd,GAAgB,IAA3C;IACAvB,EAAAA,WAAW,CAACR,SAAZ,CAAsBC,GAAtB,CAA0B,IAA1B;IACH,CAZD;IAcA;IACA;IACA;;;IACAzB,MAAM,CAACqB,SAAP,CAAiB4B,IAAjB,GAAwB,YAAU;IAC9B,MAAIS,GAAG,GAAG,KAAK3C,EAAL,CAAQ2B,QAAR,CAAiBpB,MAA3B;;IACA,MAAG,KAAKhB,IAAL,IAAaoD,GAAhB,EAAoB;IAChB,SAAKpD,IAAL,GAAY,CAAZ;IACH,GAFD,MAEK;IACD,SAAKA,IAAL;IACH;;IACD,OAAKqC,MAAL;IACH,CARD;IAUA;IACA;IACA;IACA;IACA;IACA;;;IACA3C,MAAM,CAACqB,SAAP,CAAiBI,GAAjB,GAAuB,UAASxB,EAAT,EAAY0D,IAAZ,EAAiBC,QAAjB,EAA0B;IAC7C;IACA,MAAIF,GAAG,GAAG,KAAK7C,EAAL,CAAQ6B,QAAR,CAAiBpB,MAA3B;IACA,MAAIuC,QAAQ,GAAG,KAAf,CAH6C;;IAK7C,MAAGH,GAAG,GAAG,KAAKvD,QAAX,KAAwB,CAA3B,EAA6B;IACzB0D,IAAAA,QAAQ,GAAG,IAAX;IACH,GAP4C;;;IAS7C,MAAIC,EAAE,GAAGrD,QAAQ,CAACc,aAAT,CAAuB,IAAvB,CAAT;IACA,MAAIwC,GAAG,GAAGtD,QAAQ,CAACc,aAAT,CAAuB,KAAvB,CAAV;IACAwC,EAAAA,GAAG,CAACvC,SAAJ,CAAcC,GAAd,CAAkB,OAAlB;;IACA,MAAGxB,EAAH,EAAM;IACF8D,IAAAA,GAAG,CAACC,YAAJ,CAAiB,IAAjB,EAAsB/D,EAAtB;IACH;;IACD,MAAG0D,IAAH,EAAQ;IACJI,IAAAA,GAAG,CAACE,SAAJ,GAAgBN,IAAhB;IACH;;IACDG,EAAAA,EAAE,CAACpC,WAAH,CAAeqC,GAAf;IAEA,OAAKlD,EAAL,CAAQa,WAAR,CAAoBoC,EAApB,EApB6C;;IAsB7C,MAAGD,QAAH,EAAY;IACR;IACA,QAAIK,OAAO,GAAEzD,QAAQ,CAACc,aAAT,CAAuB,IAAvB,CAAb;IACA2C,IAAAA,OAAO,CAACC,WAAR,GAAsB,KAAKpD,EAAL,CAAQ2B,QAAR,CAAiBpB,MAAjB,GAA0B,CAAhD;IACA4C,IAAAA,OAAO,CAAC1C,SAAR,CAAkBC,GAAlB,CAAsB,OAAtB,EAJQ;;IAMR,QAAG,KAAKV,EAAL,CAAQ2B,QAAR,CAAiBpB,MAAjB,IAA2B,CAA9B,EAAgC;IAC5B4C,MAAAA,OAAO,CAAC1C,SAAR,CAAkBC,GAAlB,CAAsB,IAAtB;IACH;;IACD,SAAKV,EAAL,CAAQW,WAAR,CAAoBwC,OAApB;IAEH;;IACD,MAAG,OAAON,QAAP,KAAoB,UAAvB,EAAkC;IAC9BA,IAAAA,QAAQ,CAACpB,IAAT,CAAc,IAAd;IACH;IACJ,CArCD;;IAuCAxC,MAAM,CAACqB,SAAP,CAAiB+C,OAAjB,GAA2B,YAAU;IACjC,OAAK5D,EAAL,GAAU,IAAV;IACA,OAAKK,EAAL,GAAU,IAAV;IACA,OAAKE,EAAL,GAAU,IAAV;IACA,OAAKsB,UAAL;;IACA,MAAG,KAAKjC,UAAR,EAAmB;IACf,SAAKS,EAAL,CAAQwD,mBAAR,CAA4B,KAAKrD,MAAjC,EAAwC,KAAK4B,QAA7C;IACA,SAAK/B,EAAL,CAAQiB,gBAAR,CAAyB,KAAKb,OAA9B,EAAsC,KAAK6B,SAA3C;IACH;IACJ,CATD;;IC1OA;IACA;IACA;IACA;IACA;;;;;;;;"}